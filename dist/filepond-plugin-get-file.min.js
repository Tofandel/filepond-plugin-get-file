/*!
 * FilePondPluginGetFile 1.1.0
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit undefined for details.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).FilePondPluginGetFile=t()}(this,(function(){"use strict";const e=(e,t)=>{let o=document.createElement("a");return o.href=t.getMetadata("url")||t.source,o.target="_blank",o.rel="noopener",o.className="filepond--download-icon",o.title=e,o},t=(e,t)=>{const o=t.target,n=window.URL.createObjectURL(e.file);o.href=n,o.download=e.file.name,setTimeout((()=>{window.URL.revokeObjectURL(n),o.href=e.getMetadata("url")||e.source}),10)},o=o=>{const{addFilter:n,utils:i}=o,{Type:d,createRoute:l}=i;return n("CREATE_VIEW",(o=>{const{is:n,view:i,query:d}=o;if(!n("file"))return;i.registerWriter(l({DID_LOAD_ITEM:({root:o,props:n})=>{const{id:i}=n,l=d("GET_ITEM",i);if(!l||l.archived)return;const r=o.query("GET_LABEL_BUTTON_DOWNLOAD_ITEM"),a=o.query("GET_ALLOW_DOWNLOAD_BY_URL");((o,n,i,d)=>{const l=n.querySelector(".filepond--file-info-main"),r=e(i,o);l.prepend(r),d||r.addEventListener("click",(e=>t(o,e)))})(l,o.element,r,a)}}))})),{options:{labelButtonDownloadItem:["Download file",d.STRING],allowDownloadByUrl:[!1,d.BOOLEAN]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:o})),o}));
