/*!
 * FilePondPluginGetFile 1.1.0
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit undefined for details.
 */

const e=(e,t)=>{let o=document.createElement("a");return o.href=t.getMetadata("url")||t.source,o.target="_blank",o.rel="noopener",o.className="filepond--download-icon",o.title=e,o},t=(e,t)=>{const o=t.target,n=window.URL.createObjectURL(e.file);o.href=n,o.download=e.file.name,setTimeout((()=>{window.URL.revokeObjectURL(n),o.href=e.getMetadata("url")||e.source}),10)},o=o=>{const{addFilter:n,utils:r}=o,{Type:i,createRoute:l}=r;return n("CREATE_VIEW",(o=>{const{is:n,view:r,query:i}=o;if(!n("file"))return;r.registerWriter(l({DID_LOAD_ITEM:({root:o,props:n})=>{const{id:r}=n,l=i("GET_ITEM",r);if(!l||l.archived)return;const d=o.query("GET_LABEL_BUTTON_DOWNLOAD_ITEM"),a=o.query("GET_ALLOW_DOWNLOAD_BY_URL");((o,n,r,i)=>{const l=n.querySelector(".filepond--file-info-main"),d=e(r,o);l.prepend(d),i||d.addEventListener("click",(e=>t(o,e)))})(l,o.element,d,a)}}))})),{options:{labelButtonDownloadItem:["Download file",i.STRING],allowDownloadByUrl:[!1,i.BOOLEAN]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:o}));export{o as default};
